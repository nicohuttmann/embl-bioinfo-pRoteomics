<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 5 Coding style | Data Analysis in R</title>

    <meta name="author" content="Nico Hüttmann" />
  
   <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::bs4_book,
set in the _output.yml file.</p>" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 5 Coding style | Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::bs4_book,
set in the _output.yml file.</p>" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Coding style | Data Analysis in R" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::bs4_book,
set in the _output.yml file.</p>" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.7.0/transition.js"></script>
    <script src="libs/bs3compat-0.7.0/tabs.js"></script>
    <script src="libs/bs3compat-0.7.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Analysis in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="coding-style" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Coding style</h1>
<p>Okay, we nearly made it to our project. One last chapter. I promise.</p>
<p>One decision which you may have already guessed, is that I am a follower of the tidyverse and try to use it instead of the base R solutions wherever possible.<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> Still, it is not almighty and sometimes you will need other solutions. For example dividing two data frames through each other would require the tidyverse functions <code>pivot_longer</code>, <code>inner_join</code>, <code>mutate</code> and <code>pivot_wider</code>. The elegant base R solution is having the data as matrices and simply using the mathematical operator <code>/</code>.</p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#button3" aria-expanded="false" aria-controls="button3">
base R solution
</button>
<div id="button3" class="collapse">
<p><br />
</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="coding-style.html#cb10-1" tabindex="-1"></a>m1 <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb10-2"><a href="coding-style.html#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="coding-style.html#cb10-3" tabindex="-1"></a>m2 <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb10-4"><a href="coding-style.html#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="coding-style.html#cb10-5" tabindex="-1"></a>m2 <span class="sc">/</span> m1</span></code></pre></div>
</div>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#button4" aria-expanded="false" aria-controls="button4">
tidyverse solution
</button>
<div id="button4" class="collapse">
<p><br />
</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="coding-style.html#cb11-1" tabindex="-1"></a><span class="co"># Making the tibble works slightly different in our exampe </span></span>
<span id="cb11-2"><a href="coding-style.html#cb11-2" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">c =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb11-3"><a href="coding-style.html#cb11-3" tabindex="-1"></a><span class="co"># and multiplying each element by 2 gets done with mutate and across. </span></span>
<span id="cb11-4"><a href="coding-style.html#cb11-4" tabindex="-1"></a><span class="co"># We will get back to this later</span></span>
<span id="cb11-5"><a href="coding-style.html#cb11-5" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">c =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="coding-style.html#cb11-6" tabindex="-1"></a>  <span class="co"># \(x) x * 2 is equivalent to function(x) x * 2</span></span>
<span id="cb11-7"><a href="coding-style.html#cb11-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), \(x) x <span class="sc">*</span> <span class="dv">2</span>))</span>
<span id="cb11-8"><a href="coding-style.html#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="coding-style.html#cb11-9" tabindex="-1"></a>t2 <span class="sc">/</span> t1</span></code></pre></div>
<p>Damn, while writing this example, I found out that what I was trying to show not to work, did somehow work. But let me explain why I don’t like the example.</p>
<p>The structure of an object in R can be found by using the <code>class()</code> function. Just try it.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="coding-style.html#cb12-1" tabindex="-1"></a><span class="fu">class</span>(m1)</span>
<span id="cb12-2"><a href="coding-style.html#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="coding-style.html#cb12-3" tabindex="-1"></a><span class="fu">class</span>(m2)</span>
<span id="cb12-4"><a href="coding-style.html#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="coding-style.html#cb12-5" tabindex="-1"></a><span class="fu">class</span>(m2 <span class="sc">/</span> m1)</span></code></pre></div>
<p>All objects in the base R example are matrices. Let’s check the tidyverse example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="coding-style.html#cb13-1" tabindex="-1"></a><span class="fu">class</span>(t1)</span>
<span id="cb13-2"><a href="coding-style.html#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="coding-style.html#cb13-3" tabindex="-1"></a><span class="fu">class</span>(t2)</span>
<span id="cb13-4"><a href="coding-style.html#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="coding-style.html#cb13-5" tabindex="-1"></a><span class="fu">class</span>(t2 <span class="sc">/</span> t1)</span></code></pre></div>
<p>The output of the divide operation is not a <code>tibble</code>/“tbl_df” object anymore, it is a <code>data.frame</code>. This is not a big problem for now, and can be solved quite easily with the <code>tibble::as_tibble()</code> function:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="coding-style.html#cb14-1" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(t2 <span class="sc">/</span> t1)</span></code></pre></div>
<p>However, it is recommended to not change the <code>class</code> of your data in such a way during your analysis.</p>
<p>The real tidyverse solution would work the following. The key is that we combine both tibbles into one which allows us to divide the columns through each other in a simple <code>dplyr::mutate()</code> operation.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="coding-style.html#cb15-1" tabindex="-1"></a><span class="co"># First we add a row column to the tibbles, this brings them closer to real data </span></span>
<span id="cb15-2"><a href="coding-style.html#cb15-2" tabindex="-1"></a>t1_r <span class="ot">&lt;-</span> t1 <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="coding-style.html#cb15-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>), </span>
<span id="cb15-4"><a href="coding-style.html#cb15-4" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>)</span>
<span id="cb15-5"><a href="coding-style.html#cb15-5" tabindex="-1"></a><span class="co"># Do it again </span></span>
<span id="cb15-6"><a href="coding-style.html#cb15-6" tabindex="-1"></a>t2_r <span class="ot">&lt;-</span> t2 <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="coding-style.html#cb15-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>), </span>
<span id="cb15-8"><a href="coding-style.html#cb15-8" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>)</span>
<span id="cb15-9"><a href="coding-style.html#cb15-9" tabindex="-1"></a><span class="co"># Now we bring our data from a wide format into a long format </span></span>
<span id="cb15-10"><a href="coding-style.html#cb15-10" tabindex="-1"></a>t1_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(t1_r, </span>
<span id="cb15-11"><a href="coding-style.html#cb15-11" tabindex="-1"></a>                        <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>), </span>
<span id="cb15-12"><a href="coding-style.html#cb15-12" tabindex="-1"></a>                        <span class="at">names_to =</span> <span class="st">&quot;column&quot;</span>, </span>
<span id="cb15-13"><a href="coding-style.html#cb15-13" tabindex="-1"></a>                        <span class="at">values_to =</span> <span class="st">&quot;number&quot;</span>)</span>
<span id="cb15-14"><a href="coding-style.html#cb15-14" tabindex="-1"></a><span class="co"># And again </span></span>
<span id="cb15-15"><a href="coding-style.html#cb15-15" tabindex="-1"></a>t2_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(t2_r, </span>
<span id="cb15-16"><a href="coding-style.html#cb15-16" tabindex="-1"></a>                        <span class="at">cols =</span> <span class="sc">-</span><span class="dv">1</span>, </span>
<span id="cb15-17"><a href="coding-style.html#cb15-17" tabindex="-1"></a>                        <span class="at">names_to =</span> <span class="st">&quot;column&quot;</span>, </span>
<span id="cb15-18"><a href="coding-style.html#cb15-18" tabindex="-1"></a>                        <span class="at">values_to =</span> <span class="st">&quot;number&quot;</span>)</span>
<span id="cb15-19"><a href="coding-style.html#cb15-19" tabindex="-1"></a></span>
<span id="cb15-20"><a href="coding-style.html#cb15-20" tabindex="-1"></a><span class="co"># We start with combining the data frames by matching both tibbles by the </span></span>
<span id="cb15-21"><a href="coding-style.html#cb15-21" tabindex="-1"></a><span class="co"># columns &quot;row&quot; and &quot;column&quot; and choosing a suffing for overlapping column names</span></span>
<span id="cb15-22"><a href="coding-style.html#cb15-22" tabindex="-1"></a><span class="fu">full_join</span>(t1_long, t2_long, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;row&quot;</span>, </span>
<span id="cb15-23"><a href="coding-style.html#cb15-23" tabindex="-1"></a>                                   <span class="st">&quot;column&quot;</span>), </span>
<span id="cb15-24"><a href="coding-style.html#cb15-24" tabindex="-1"></a>          <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_1&quot;</span>, <span class="st">&quot;_2&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-25"><a href="coding-style.html#cb15-25" tabindex="-1"></a>  <span class="co"># Then we can divide the values of t2 by t1 and save them in a new column </span></span>
<span id="cb15-26"><a href="coding-style.html#cb15-26" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">number =</span> number_2 <span class="sc">/</span> number_1) <span class="sc">%&gt;%</span> </span>
<span id="cb15-27"><a href="coding-style.html#cb15-27" tabindex="-1"></a>  <span class="co"># Now we finally pivot back to the wide data format from the beginning</span></span>
<span id="cb15-28"><a href="coding-style.html#cb15-28" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="st">&quot;row&quot;</span>, </span>
<span id="cb15-29"><a href="coding-style.html#cb15-29" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">&quot;column&quot;</span>, </span>
<span id="cb15-30"><a href="coding-style.html#cb15-30" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">&quot;number&quot;</span>)</span></code></pre></div>
<p>This seems like a very tedious example in comparison, but also bears it’s advantages as we will see later.</p>
<p>Btw, this is how I would’ve done the above in a code-condensed form.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="coding-style.html#cb16-1" tabindex="-1"></a><span class="co"># First we put the tibbles in a list </span></span>
<span id="cb16-2"><a href="coding-style.html#cb16-2" tabindex="-1"></a><span class="fu">list</span>(<span class="st">&quot;t1&quot;</span> <span class="ot">=</span> t1, <span class="st">&quot;t2&quot;</span> <span class="ot">=</span> t2) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="coding-style.html#cb16-3" tabindex="-1"></a>  <span class="co"># map allows us to do the same computation for all objects of the list as </span></span>
<span id="cb16-4"><a href="coding-style.html#cb16-4" tabindex="-1"></a>  <span class="co"># defined by the function \(x) x...</span></span>
<span id="cb16-5"><a href="coding-style.html#cb16-5" tabindex="-1"></a>  <span class="fu">map</span>(\(x) x <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="coding-style.html#cb16-6" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">row =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>), </span>
<span id="cb16-7"><a href="coding-style.html#cb16-7" tabindex="-1"></a>               <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="coding-style.html#cb16-8" tabindex="-1"></a>        <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="dv">1</span>, </span>
<span id="cb16-9"><a href="coding-style.html#cb16-9" tabindex="-1"></a>                     <span class="at">names_to =</span> <span class="st">&quot;column&quot;</span>, </span>
<span id="cb16-10"><a href="coding-style.html#cb16-10" tabindex="-1"></a>                     <span class="at">values_to =</span> <span class="st">&quot;number&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="coding-style.html#cb16-11" tabindex="-1"></a>  <span class="co"># Once both tibbles are ready to be combined, we can access them via the with </span></span>
<span id="cb16-12"><a href="coding-style.html#cb16-12" tabindex="-1"></a>  <span class="co"># function (we may talk about this again, I find it very helpful sometimes)</span></span>
<span id="cb16-13"><a href="coding-style.html#cb16-13" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">full_join</span>(t1, t2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;row&quot;</span>, </span>
<span id="cb16-14"><a href="coding-style.html#cb16-14" tabindex="-1"></a>                                <span class="st">&quot;column&quot;</span>), </span>
<span id="cb16-15"><a href="coding-style.html#cb16-15" tabindex="-1"></a>                 <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_1&quot;</span>, <span class="st">&quot;_2&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb16-16"><a href="coding-style.html#cb16-16" tabindex="-1"></a>  <span class="co"># Now we continue as above</span></span>
<span id="cb16-17"><a href="coding-style.html#cb16-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">number =</span> number_2 <span class="sc">/</span> number_1) <span class="sc">%&gt;%</span> </span>
<span id="cb16-18"><a href="coding-style.html#cb16-18" tabindex="-1"></a>  <span class="co"># And back to a wide format tibble </span></span>
<span id="cb16-19"><a href="coding-style.html#cb16-19" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="st">&quot;row&quot;</span>, </span>
<span id="cb16-20"><a href="coding-style.html#cb16-20" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">&quot;column&quot;</span>, </span>
<span id="cb16-21"><a href="coding-style.html#cb16-21" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">&quot;number&quot;</span>)</span></code></pre></div>
<p>You do not need to understand all of this immediately, but these are some of the most common operations in omics data science. If you understand the <code>tidyr::pivot_longer/wider</code> functions within this week, you’re years ahead compared to my journey in data science :)</p>
</div>
<div id="coding-style-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Coding style</h2>
<p><img src="https://upload.wikimedia.org/wikipedia/en/b/b9/MagrittePipe.jpg" /></p>
<p>Well, what is this?! It is not a pipe. But this <code>%&gt;%</code> is. Or is it?<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a></p>
<p>We previously learned that “Everything that happens is a function call.” and in order for the result of the function to ‘exist’, we need to assign it as an object. Fine. Works. But what happens if we need to do multiple operations on the same object to get our result?</p>
<p>Let’s consider the generic example of a vector that contains letters which we would like to count and represent in a barplot.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="coding-style.html#cb17-1" tabindex="-1"></a>letters_freq <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span> <span class="ot">=</span> <span class="dv">5</span>, <span class="st">&quot;B&quot;</span> <span class="ot">=</span> <span class="dv">18</span>, <span class="st">&quot;C&quot;</span> <span class="ot">=</span> <span class="dv">20</span>, <span class="st">&quot;D&quot;</span> <span class="ot">=</span> <span class="dv">2</span>,</span>
<span id="cb17-2"><a href="coding-style.html#cb17-2" tabindex="-1"></a>                  <span class="st">&quot;E&quot;</span> <span class="ot">=</span> <span class="dv">24</span>, <span class="st">&quot;F&quot;</span> <span class="ot">=</span> <span class="dv">13</span>, <span class="st">&quot;G&quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;H&quot;</span> <span class="ot">=</span> <span class="dv">25</span>,</span>
<span id="cb17-3"><a href="coding-style.html#cb17-3" tabindex="-1"></a>                  <span class="st">&quot;I&quot;</span> <span class="ot">=</span> <span class="dv">21</span>, <span class="st">&quot;J&quot;</span> <span class="ot">=</span> <span class="dv">11</span>, <span class="st">&quot;K&quot;</span> <span class="ot">=</span> <span class="dv">19</span>, <span class="st">&quot;L&quot;</span> <span class="ot">=</span> <span class="dv">6</span>,</span>
<span id="cb17-4"><a href="coding-style.html#cb17-4" tabindex="-1"></a>                  <span class="st">&quot;M&quot;</span> <span class="ot">=</span> <span class="dv">10</span>, <span class="st">&quot;N&quot;</span> <span class="ot">=</span> <span class="dv">14</span>, <span class="st">&quot;O&quot;</span> <span class="ot">=</span> <span class="dv">16</span>, <span class="st">&quot;P&quot;</span> <span class="ot">=</span> <span class="dv">9</span>,</span>
<span id="cb17-5"><a href="coding-style.html#cb17-5" tabindex="-1"></a>                  <span class="st">&quot;Q&quot;</span> <span class="ot">=</span> <span class="dv">23</span>, <span class="st">&quot;R&quot;</span> <span class="ot">=</span> <span class="dv">17</span>, <span class="st">&quot;S&quot;</span> <span class="ot">=</span> <span class="dv">8</span>, <span class="st">&quot;T&quot;</span> <span class="ot">=</span> <span class="dv">26</span>,</span>
<span id="cb17-6"><a href="coding-style.html#cb17-6" tabindex="-1"></a>                  <span class="st">&quot;U&quot;</span> <span class="ot">=</span> <span class="dv">22</span>, <span class="st">&quot;V&quot;</span> <span class="ot">=</span> <span class="dv">7</span>, <span class="st">&quot;W&quot;</span> <span class="ot">=</span> <span class="dv">15</span>, <span class="st">&quot;X&quot;</span> <span class="ot">=</span> <span class="dv">12</span>,</span>
<span id="cb17-7"><a href="coding-style.html#cb17-7" tabindex="-1"></a>                  <span class="st">&quot;Y&quot;</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">&quot;Z&quot;</span> <span class="ot">=</span> <span class="dv">4</span>)</span>
<span id="cb17-8"><a href="coding-style.html#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="coding-style.html#cb17-9" tabindex="-1"></a>random_letters <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">names</span>(letters_freq), letters_freq)</span></code></pre></div>
<p>This is the first exercise in this book<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a>. Once you are done with the above code, observe what happened and then continue with the code below.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="coding-style.html#cb18-1" tabindex="-1"></a><span class="co"># Count each element of random_letters </span></span>
<span id="cb18-2"><a href="coding-style.html#cb18-2" tabindex="-1"></a>random_letters_table <span class="ot">&lt;-</span> <span class="fu">table</span>(random_letters)</span>
<span id="cb18-3"><a href="coding-style.html#cb18-3" tabindex="-1"></a><span class="co"># Sort table in decending order </span></span>
<span id="cb18-4"><a href="coding-style.html#cb18-4" tabindex="-1"></a>random_letters_table_sorted <span class="ot">&lt;-</span> <span class="fu">sort</span>(random_letters_table, <span class="at">decreasing =</span> T)</span>
<span id="cb18-5"><a href="coding-style.html#cb18-5" tabindex="-1"></a><span class="co"># Plot the frequency of each letter </span></span>
<span id="cb18-6"><a href="coding-style.html#cb18-6" tabindex="-1"></a><span class="fu">barplot</span>(random_letters_table_sorted)</span></code></pre></div>
<p>The code above yields a barplot that represents the frequency of each letter. To get to our result, we created two intermediate objects <code>random_letters_table</code> and <code>random_letters_table_sorted</code>. We can do the same all with the <code>random_letters</code> object, simply overwriting it in each line.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="coding-style.html#cb19-1" tabindex="-1"></a><span class="co"># Count each element of random_letters </span></span>
<span id="cb19-2"><a href="coding-style.html#cb19-2" tabindex="-1"></a>random_letters <span class="ot">&lt;-</span> <span class="fu">table</span>(random_letters)</span>
<span id="cb19-3"><a href="coding-style.html#cb19-3" tabindex="-1"></a><span class="co"># Sort table in descending order </span></span>
<span id="cb19-4"><a href="coding-style.html#cb19-4" tabindex="-1"></a>random_letters <span class="ot">&lt;-</span> <span class="fu">sort</span>(random_letters, <span class="at">decreasing =</span> T)</span>
<span id="cb19-5"><a href="coding-style.html#cb19-5" tabindex="-1"></a><span class="co"># Plot the frequency of each letter </span></span>
<span id="cb19-6"><a href="coding-style.html#cb19-6" tabindex="-1"></a><span class="fu">barplot</span>(random_letters)</span></code></pre></div>
<p>You saw in the examples above that there are different ways to chain the outputs of the different computations into each other to arrive at the barplot. Let’s try and use the <code>%&gt;%</code> operator to simplify this process.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="coding-style.html#cb20-1" tabindex="-1"></a><span class="co"># We reassign random_letters since we overwrote it in the previous example</span></span>
<span id="cb20-2"><a href="coding-style.html#cb20-2" tabindex="-1"></a>random_letters <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">names</span>(letters_freq), letters_freq)</span>
<span id="cb20-3"><a href="coding-style.html#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="coding-style.html#cb20-4" tabindex="-1"></a>random_letters <span class="sc">%&gt;%</span>  </span>
<span id="cb20-5"><a href="coding-style.html#cb20-5" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="coding-style.html#cb20-6" tabindex="-1"></a>  <span class="fu">sort</span>(<span class="at">decreasing =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb20-7"><a href="coding-style.html#cb20-7" tabindex="-1"></a>  <span class="fu">barplot</span>()</span></code></pre></div>
<p>The chain begins with an object <code>random_letters</code> and is then followed by functions in each subsequent line. The output of the preceding line is always used as the first argument of the following function.</p>
<p>The above is equivalent to this nested construct:<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="coding-style.html#cb21-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">sort</span>(<span class="fu">table</span>(random_letters), <span class="at">decreasing =</span> T))</span></code></pre></div>
<p>I hope it is obvious why the <code>%&gt;%</code> is a useful tool, not just for writing less code but also making the code more legible. Btw, did you find the hidden message in the barplot? If not, try and stretch the ‘Plots’ window or press ‘Zoom’ in the ‘Plots’ panel.</p>
<p>The making of this exercise is an even better example of the utility of the <code>%&gt;%</code> :)</p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#button5" aria-expanded="false" aria-controls="button5">
Making of
</button>
<div id="button5" class="collapse">
<p><br />
</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="coding-style.html#cb22-1" tabindex="-1"></a>sentence_full <span class="ot">&lt;-</span> <span class="st">&quot;The quick brown fox jumps over the lazy dog&quot;</span></span>
<span id="cb22-2"><a href="coding-style.html#cb22-2" tabindex="-1"></a><span class="do">## Unrelated but, wow I just discovered there&#39;s a `sentences` object in R</span></span>
<span id="cb22-3"><a href="coding-style.html#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="coding-style.html#cb22-4" tabindex="-1"></a><span class="co"># Generate the frequency of each individual letter</span></span>
<span id="cb22-5"><a href="coding-style.html#cb22-5" tabindex="-1"></a>letters_freq <span class="ot">&lt;-</span> sentence_full <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="coding-style.html#cb22-6" tabindex="-1"></a>  <span class="co"># Remove spaces</span></span>
<span id="cb22-7"><a href="coding-style.html#cb22-7" tabindex="-1"></a>  <span class="fu">str_remove_all</span>(<span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-8"><a href="coding-style.html#cb22-8" tabindex="-1"></a>  <span class="co"># Split the string into individual letters </span></span>
<span id="cb22-9"><a href="coding-style.html#cb22-9" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-10"><a href="coding-style.html#cb22-10" tabindex="-1"></a>  <span class="co"># Extract vector from list </span></span>
<span id="cb22-11"><a href="coding-style.html#cb22-11" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-12"><a href="coding-style.html#cb22-12" tabindex="-1"></a>  <span class="co"># Make all letters upper case</span></span>
<span id="cb22-13"><a href="coding-style.html#cb22-13" tabindex="-1"></a>  <span class="fu">toupper</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-14"><a href="coding-style.html#cb22-14" tabindex="-1"></a>  <span class="co"># Remove dublicated letters </span></span>
<span id="cb22-15"><a href="coding-style.html#cb22-15" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-16"><a href="coding-style.html#cb22-16" tabindex="-1"></a>  <span class="co"># Make vector with letters as names and numbers from 26 to 1 as content</span></span>
<span id="cb22-17"><a href="coding-style.html#cb22-17" tabindex="-1"></a>  <span class="co"># Do you see how the . marks the position of the argument coming from the previous line?</span></span>
<span id="cb22-18"><a href="coding-style.html#cb22-18" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="dv">26</span><span class="sc">:</span><span class="dv">1</span>, .) <span class="sc">%&gt;%</span> </span>
<span id="cb22-19"><a href="coding-style.html#cb22-19" tabindex="-1"></a>  <span class="co"># Reorder the vector so that the solution is not immediately obvious to you guys </span></span>
<span id="cb22-20"><a href="coding-style.html#cb22-20" tabindex="-1"></a>  <span class="co"># Not this is some weird stuff here, do try this at home</span></span>
<span id="cb22-21"><a href="coding-style.html#cb22-21" tabindex="-1"></a>  <span class="st">`</span><span class="at">[</span><span class="st">`</span>(., <span class="fu">order</span>(<span class="fu">names</span>(.)))</span>
<span id="cb22-22"><a href="coding-style.html#cb22-22" tabindex="-1"></a></span>
<span id="cb22-23"><a href="coding-style.html#cb22-23" tabindex="-1"></a><span class="co"># Test if it works</span></span>
<span id="cb22-24"><a href="coding-style.html#cb22-24" tabindex="-1"></a>random_letters <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">names</span>(letters_freq), letters_freq)</span>
<span id="cb22-25"><a href="coding-style.html#cb22-25" tabindex="-1"></a></span>
<span id="cb22-26"><a href="coding-style.html#cb22-26" tabindex="-1"></a></span>
<span id="cb22-27"><a href="coding-style.html#cb22-27" tabindex="-1"></a><span class="co"># Now prepare the example for the exercise</span></span>
<span id="cb22-28"><a href="coding-style.html#cb22-28" tabindex="-1"></a></span>
<span id="cb22-29"><a href="coding-style.html#cb22-29" tabindex="-1"></a><span class="co"># This function copies a vector to the console </span></span>
<span id="cb22-30"><a href="coding-style.html#cb22-30" tabindex="-1"></a>.cat_character_named <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb22-31"><a href="coding-style.html#cb22-31" tabindex="-1"></a>  </span>
<span id="cb22-32"><a href="coding-style.html#cb22-32" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">names</span>(...), <span class="st">&#39;&quot; = &quot;&#39;</span>, ..., <span class="st">&#39;&quot;&#39;</span>)</span>
<span id="cb22-33"><a href="coding-style.html#cb22-33" tabindex="-1"></a>  </span>
<span id="cb22-34"><a href="coding-style.html#cb22-34" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&#39;c(&quot;&#39;</span>, <span class="fu">paste</span>(n, <span class="at">collapse =</span> <span class="st">&#39;,</span><span class="sc">\n\t</span><span class="st">&quot;&#39;</span>), <span class="st">&#39;)&#39;</span>))</span>
<span id="cb22-35"><a href="coding-style.html#cb22-35" tabindex="-1"></a>  </span>
<span id="cb22-36"><a href="coding-style.html#cb22-36" tabindex="-1"></a>}</span>
<span id="cb22-37"><a href="coding-style.html#cb22-37" tabindex="-1"></a></span>
<span id="cb22-38"><a href="coding-style.html#cb22-38" tabindex="-1"></a><span class="fu">.cat_character_named</span>(random_letters)</span>
<span id="cb22-39"><a href="coding-style.html#cb22-39" tabindex="-1"></a></span>
<span id="cb22-40"><a href="coding-style.html#cb22-40" tabindex="-1"></a>letters_freq <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span> <span class="ot">=</span> <span class="dv">5</span>,</span>
<span id="cb22-41"><a href="coding-style.html#cb22-41" tabindex="-1"></a>                  <span class="st">&quot;B&quot;</span> <span class="ot">=</span> <span class="dv">18</span>,</span>
<span id="cb22-42"><a href="coding-style.html#cb22-42" tabindex="-1"></a>                  <span class="st">&quot;C&quot;</span> <span class="ot">=</span> <span class="dv">20</span>,</span>
<span id="cb22-43"><a href="coding-style.html#cb22-43" tabindex="-1"></a>                  <span class="st">&quot;D&quot;</span> <span class="ot">=</span> <span class="dv">2</span>,</span>
<span id="cb22-44"><a href="coding-style.html#cb22-44" tabindex="-1"></a>                  <span class="st">&quot;E&quot;</span> <span class="ot">=</span> <span class="dv">24</span>,</span>
<span id="cb22-45"><a href="coding-style.html#cb22-45" tabindex="-1"></a>                  <span class="st">&quot;F&quot;</span> <span class="ot">=</span> <span class="dv">13</span>,</span>
<span id="cb22-46"><a href="coding-style.html#cb22-46" tabindex="-1"></a>                  <span class="st">&quot;G&quot;</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb22-47"><a href="coding-style.html#cb22-47" tabindex="-1"></a>                  <span class="st">&quot;H&quot;</span> <span class="ot">=</span> <span class="dv">25</span>,</span>
<span id="cb22-48"><a href="coding-style.html#cb22-48" tabindex="-1"></a>                  <span class="st">&quot;I&quot;</span> <span class="ot">=</span> <span class="dv">21</span>,</span>
<span id="cb22-49"><a href="coding-style.html#cb22-49" tabindex="-1"></a>                  <span class="st">&quot;J&quot;</span> <span class="ot">=</span> <span class="dv">11</span>,</span>
<span id="cb22-50"><a href="coding-style.html#cb22-50" tabindex="-1"></a>                  <span class="st">&quot;K&quot;</span> <span class="ot">=</span> <span class="dv">19</span>,</span>
<span id="cb22-51"><a href="coding-style.html#cb22-51" tabindex="-1"></a>                  <span class="st">&quot;L&quot;</span> <span class="ot">=</span> <span class="dv">6</span>,</span>
<span id="cb22-52"><a href="coding-style.html#cb22-52" tabindex="-1"></a>                  <span class="st">&quot;M&quot;</span> <span class="ot">=</span> <span class="dv">10</span>,</span>
<span id="cb22-53"><a href="coding-style.html#cb22-53" tabindex="-1"></a>                  <span class="st">&quot;N&quot;</span> <span class="ot">=</span> <span class="dv">14</span>,</span>
<span id="cb22-54"><a href="coding-style.html#cb22-54" tabindex="-1"></a>                  <span class="st">&quot;O&quot;</span> <span class="ot">=</span> <span class="dv">16</span>,</span>
<span id="cb22-55"><a href="coding-style.html#cb22-55" tabindex="-1"></a>                  <span class="st">&quot;P&quot;</span> <span class="ot">=</span> <span class="dv">9</span>,</span>
<span id="cb22-56"><a href="coding-style.html#cb22-56" tabindex="-1"></a>                  <span class="st">&quot;Q&quot;</span> <span class="ot">=</span> <span class="dv">23</span>,</span>
<span id="cb22-57"><a href="coding-style.html#cb22-57" tabindex="-1"></a>                  <span class="st">&quot;R&quot;</span> <span class="ot">=</span> <span class="dv">17</span>,</span>
<span id="cb22-58"><a href="coding-style.html#cb22-58" tabindex="-1"></a>                  <span class="st">&quot;S&quot;</span> <span class="ot">=</span> <span class="dv">8</span>,</span>
<span id="cb22-59"><a href="coding-style.html#cb22-59" tabindex="-1"></a>                  <span class="st">&quot;T&quot;</span> <span class="ot">=</span> <span class="dv">26</span>,</span>
<span id="cb22-60"><a href="coding-style.html#cb22-60" tabindex="-1"></a>                  <span class="st">&quot;U&quot;</span> <span class="ot">=</span> <span class="dv">22</span>,</span>
<span id="cb22-61"><a href="coding-style.html#cb22-61" tabindex="-1"></a>                  <span class="st">&quot;V&quot;</span> <span class="ot">=</span> <span class="dv">7</span>,</span>
<span id="cb22-62"><a href="coding-style.html#cb22-62" tabindex="-1"></a>                  <span class="st">&quot;W&quot;</span> <span class="ot">=</span> <span class="dv">15</span>,</span>
<span id="cb22-63"><a href="coding-style.html#cb22-63" tabindex="-1"></a>                  <span class="st">&quot;X&quot;</span> <span class="ot">=</span> <span class="dv">12</span>,</span>
<span id="cb22-64"><a href="coding-style.html#cb22-64" tabindex="-1"></a>                  <span class="st">&quot;Y&quot;</span> <span class="ot">=</span> <span class="dv">3</span>,</span>
<span id="cb22-65"><a href="coding-style.html#cb22-65" tabindex="-1"></a>                  <span class="st">&quot;Z&quot;</span> <span class="ot">=</span> <span class="dv">4</span>)</span></code></pre></div>
</div>
<p><br />
For a probably better explanation of pipes or more in-depth explanation, please have a look at the <a href="https://r4ds.had.co.nz/pipes.html">corresponding chapter</a> in <a href="https://r4ds.had.co.nz/">R for Data Science</a> or the <a href="https://r4ds.hadley.nz/workflow-style.html#sec-pipes">chapter</a> in its second edition, <a href="https://r4ds.hadley.nz">R for Data Science (2e)</a>.</p>
<p>Using the <code>%&gt;%</code> pipe operator is only one part of the <a href="https://r4ds.hadley.nz/workflow-style.html">Style guide</a> but will have a big impact on the legibility of your code. I visually prefer the <a href="http://adv-r.had.co.nz/Style.html">old version</a> and suggest reading one of the two. If you are at the beginning of your coding career, not all recommendations will be immediately obvious, but you will remember them later on.</p>
</div>
<div id="data-organization-wihtin-r" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Data organization wihtin R</h2>
<p>As we are moving from the basics to the actual project, let’s see how we work <em>with</em> R. Working <em>in</em> R means which packages or code do we use, working <em>with</em> R means where do we put our code and our data. Let’s start at the top level. Where do our scripts and data live?</p>
<div id="r-projects" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> R projects</h3>
<p>We will not just work on an R project, we will also work in one. Please have a look at the description of <a href="https://r4ds.hadley.nz/workflow-scripts.html#projects">R projects</a> in this by now well known book. As we get closer to the <strong>Group Work Project</strong> let’s start with creating a place for our data and code.</p>
<div class="rmdnote">
<p>Create your own R project for this course. I suggest to make a folder called R within your Documents folder or wherever you store your research. In here, you could start to collect different R projects.</p>
</div>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#button6" aria-expanded="false" aria-controls="button6">
Hint
</button>
<div id="button6" class="collapse">
<p><br />
You can create a new R project by clicking File -&gt; New Project… -&gt; New Directory -&gt; New Project. Now enter the name<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a>, browse to the top folder you would like and press Create Project. If you want to keep your current R session open, tick Open in new session.</p>
</div>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#button7" aria-expanded="false" aria-controls="button7">
Additional info
</button>
<div id="button7" class="collapse">
<p><br />
It may seem convenient to have this folder on the server of your lab, so it gets archived automatically, however, it sometimes gives you trouble and slows down your analysis. Copying the R folder from time to time seems like the practical solution for me.</p>
</div>
<p><br />
Great, you created your first R project. You can identify in which project you are by the name of the window or as written in the top right corner.</p>
<p>Before creating our first R script, we can set a folder structure within our R project. This can be done from the operating system’s file explorer or with the function <code>dir.create</code>. I usually begin setting up my work directory like this:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="coding-style.html#cb23-1" tabindex="-1"></a><span class="co"># All R and Rmd scripts will be in here </span></span>
<span id="cb23-2"><a href="coding-style.html#cb23-2" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;Scripts&quot;</span>)</span>
<span id="cb23-3"><a href="coding-style.html#cb23-3" tabindex="-1"></a><span class="co"># All raw data can be stored here </span></span>
<span id="cb23-4"><a href="coding-style.html#cb23-4" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;Data&quot;</span>)</span>
<span id="cb23-5"><a href="coding-style.html#cb23-5" tabindex="-1"></a><span class="co"># A separate folder for RData objects </span></span>
<span id="cb23-6"><a href="coding-style.html#cb23-6" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;Data/RData&quot;</span>)</span>
<span id="cb23-7"><a href="coding-style.html#cb23-7" tabindex="-1"></a><span class="co"># All output like figures, tables etc. </span></span>
<span id="cb23-8"><a href="coding-style.html#cb23-8" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;Output&quot;</span>)</span></code></pre></div>
<p>Do this as you like :)</p>
</div>
<div id="lists-and-.lists" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Lists and .lists</h3>
<p>Now our data has a tidy place to live in our operating system. Nice. But what about our data <em>in R</em>?</p>
<p>Everything in R lives in the <code>Global Environment</code>. You can read more about this <a href="https://adv-r.hadley.nz/environments.html">here</a>, but do this when there is some free time or you have specific questions.</p>
<p>We previously touched on vectors and lists, with the main difference that vectors only take one kind of element and lists can store whatever you fancy. And that’s what we want.</p>
<p>Imagine you need to compute the following incredibly complicated numbers and want to store them for the meeting with your PI later:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="coding-style.html#cb24-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb24-2"><a href="coding-style.html#cb24-2" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">3</span></span>
<span id="cb24-3"><a href="coding-style.html#cb24-3" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="cn">Inf</span></span>
<span id="cb24-4"><a href="coding-style.html#cb24-4" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">0</span></span>
<span id="cb24-5"><a href="coding-style.html#cb24-5" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb24-6"><a href="coding-style.html#cb24-6" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="dv">2</span>)</span>
<span id="cb24-7"><a href="coding-style.html#cb24-7" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="dv">1</span>)</span>
<span id="cb24-8"><a href="coding-style.html#cb24-8" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">log10</span>(<span class="dv">3</span>)</span>
<span id="cb24-9"><a href="coding-style.html#cb24-9" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">log2</span>(<span class="dv">42</span>)</span>
<span id="cb24-10"><a href="coding-style.html#cb24-10" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="fu">log</span>(pi, <span class="at">base =</span> pi)</span>
<span id="cb24-11"><a href="coding-style.html#cb24-11" tabindex="-1"></a>k <span class="ot">&lt;-</span> a <span class="sc">&gt;</span> b</span>
<span id="cb24-12"><a href="coding-style.html#cb24-12" tabindex="-1"></a>l <span class="ot">&lt;-</span> a <span class="sc">&lt;</span> b</span>
<span id="cb24-13"><a href="coding-style.html#cb24-13" tabindex="-1"></a>m <span class="ot">&lt;-</span> a <span class="sc">==</span> b</span>
<span id="cb24-14"><a href="coding-style.html#cb24-14" tabindex="-1"></a>n <span class="ot">&lt;-</span> a <span class="sc">&gt;=</span> b</span>
<span id="cb24-15"><a href="coding-style.html#cb24-15" tabindex="-1"></a>o <span class="ot">&lt;-</span> a <span class="sc">&lt;=</span> b</span></code></pre></div>
<p>Omg, do you see how your Global Environment on the top right gets cluttered. Your PI won’t like that. Let’s tidy this up by using a list.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="coding-style.html#cb25-1" tabindex="-1"></a><span class="co"># Directly store the first numbers in the list</span></span>
<span id="cb25-2"><a href="coding-style.html#cb25-2" tabindex="-1"></a>important_numbers <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb25-3"><a href="coding-style.html#cb25-3" tabindex="-1"></a>  <span class="at">a =</span> <span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>, </span>
<span id="cb25-4"><a href="coding-style.html#cb25-4" tabindex="-1"></a>  <span class="at">b =</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">3</span>, </span>
<span id="cb25-5"><a href="coding-style.html#cb25-5" tabindex="-1"></a>  <span class="at">c =</span> <span class="dv">2</span> <span class="sc">*</span> <span class="cn">Inf</span>, </span>
<span id="cb25-6"><a href="coding-style.html#cb25-6" tabindex="-1"></a>  <span class="co"># You can also use a string &quot;d&quot; to define the name, it&#39;s the same</span></span>
<span id="cb25-7"><a href="coding-style.html#cb25-7" tabindex="-1"></a>  <span class="st">&quot;d&quot;</span> <span class="ot">=</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">0</span>)</span>
<span id="cb25-8"><a href="coding-style.html#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="coding-style.html#cb25-9" tabindex="-1"></a><span class="co"># Add the remaining numbers</span></span>
<span id="cb25-10"><a href="coding-style.html#cb25-10" tabindex="-1"></a>important_numbers[[<span class="st">&quot;e&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb25-11"><a href="coding-style.html#cb25-11" tabindex="-1"></a>important_numbers[[<span class="st">&quot;f&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="dv">2</span>)</span>
<span id="cb25-12"><a href="coding-style.html#cb25-12" tabindex="-1"></a>important_numbers[[<span class="st">&quot;g&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="dv">1</span>)</span>
<span id="cb25-13"><a href="coding-style.html#cb25-13" tabindex="-1"></a>important_numbers[[<span class="st">&quot;h&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">log10</span>(<span class="dv">3</span>)</span>
<span id="cb25-14"><a href="coding-style.html#cb25-14" tabindex="-1"></a>important_numbers[[<span class="st">&quot;i&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">log2</span>(<span class="dv">42</span>)</span>
<span id="cb25-15"><a href="coding-style.html#cb25-15" tabindex="-1"></a>important_numbers[[<span class="st">&quot;j&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">log</span>(pi, <span class="at">base =</span> pi)</span>
<span id="cb25-16"><a href="coding-style.html#cb25-16" tabindex="-1"></a>important_numbers[[<span class="st">&quot;k&quot;</span>]] <span class="ot">&lt;-</span> a <span class="sc">&gt;</span> b</span>
<span id="cb25-17"><a href="coding-style.html#cb25-17" tabindex="-1"></a>important_numbers[[<span class="st">&quot;l&quot;</span>]] <span class="ot">&lt;-</span> a <span class="sc">&lt;</span> b</span>
<span id="cb25-18"><a href="coding-style.html#cb25-18" tabindex="-1"></a>important_numbers[[<span class="st">&quot;m&quot;</span>]] <span class="ot">&lt;-</span> a <span class="sc">==</span> b</span>
<span id="cb25-19"><a href="coding-style.html#cb25-19" tabindex="-1"></a>important_numbers[[<span class="st">&quot;n&quot;</span>]] <span class="ot">&lt;-</span> a <span class="sc">&gt;=</span> b</span>
<span id="cb25-20"><a href="coding-style.html#cb25-20" tabindex="-1"></a>important_numbers[[<span class="st">&quot;o&quot;</span>]] <span class="ot">&lt;-</span> a <span class="sc">&lt;=</span> b</span></code></pre></div>
<p>Click on <code>important_numbers</code> on the top right<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a> and you can view the content of the list. This is equivalent to writing <code>View(important_numbers)</code> in your console or from your R script.</p>
<p>Finally, let’s clean up the mess by deleting all the previously created R objects named a, b, c and so on. This we can do with the <code>rm()</code> function. There are different ways to use it.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="coding-style.html#cb26-1" tabindex="-1"></a><span class="co"># Remove one object</span></span>
<span id="cb26-2"><a href="coding-style.html#cb26-2" tabindex="-1"></a><span class="fu">rm</span>(a)</span>
<span id="cb26-3"><a href="coding-style.html#cb26-3" tabindex="-1"></a><span class="co"># Remove multiple object </span></span>
<span id="cb26-4"><a href="coding-style.html#cb26-4" tabindex="-1"></a><span class="fu">rm</span>(b, c)</span>
<span id="cb26-5"><a href="coding-style.html#cb26-5" tabindex="-1"></a><span class="co"># Or </span></span>
<span id="cb26-6"><a href="coding-style.html#cb26-6" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>))</span>
<span id="cb26-7"><a href="coding-style.html#cb26-7" tabindex="-1"></a><span class="co"># To remove everything use the object() function</span></span>
<span id="cb26-8"><a href="coding-style.html#cb26-8" tabindex="-1"></a><span class="fu">objects</span>()</span>
<span id="cb26-9"><a href="coding-style.html#cb26-9" tabindex="-1"></a><span class="co"># and combine the two</span></span>
<span id="cb26-10"><a href="coding-style.html#cb26-10" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">objects</span>())</span>
<span id="cb26-11"><a href="coding-style.html#cb26-11" tabindex="-1"></a><span class="co"># Uups, everthing is gone. If you want to keep something add setdiff</span></span>
<span id="cb26-12"><a href="coding-style.html#cb26-12" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb26-13"><a href="coding-style.html#cb26-13" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb26-14"><a href="coding-style.html#cb26-14" tabindex="-1"></a>.c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb26-15"><a href="coding-style.html#cb26-15" tabindex="-1"></a><span class="co"># Remove all but a</span></span>
<span id="cb26-16"><a href="coding-style.html#cb26-16" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">objects</span>(), <span class="st">&quot;a&quot;</span>))</span></code></pre></div>
<p>One last trick. Did you notice how you never saw <code>.c</code> in your Global Environment. It was created as a hidden object with the <code>.</code> as a prefix. We can find it with <code>objects(all.names = T)</code> and remove it just the same.</p>
<p>It is good practice to clean your environment at the end of an analysis chunk or at the end of each script to remove things you don’t need anymore. If we are talking about gigabytes of data instead of those lousy numbers, try <code>gc()</code> after deleting the objects.<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a></p>
</div>
</div>
<div id="summary" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Summary</h2>
<p>Thanks for making it this far. This intro to <strong>R Basics</strong> ended up quite extensive, but getting through it should give you all the tools to figure out most problems in R on your own. Not all examples are useful yet, but may come in handy later. Basically every piece of code has been used in my work at one point.</p>
<p>There are a lot more functions to get to know, especially from the tidyverse, but we will cover them on the way. Please remember:</p>
<ul>
<li>Question everything you do not understand or that seems unclear.</li>
<li>There is always more than one way to get to your goal, redundancy helps us understand things better.</li>
<li>Let us know, if you have a different or better way to do something, we’re here to discuss!</li>
</ul>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="14">
<li id="fn14"><p>base R refers to the functions which are available to you in R without installing any additional package. And little surprisingly, it is a package as well. You could check it’s functions by writing <code>base::</code>and pressing Tab. <em>I just found all the basic mathematical operators by doing this and scrolling up. I’m learning so much by doing this!</em><a href="coding-style.html#fnref14" class="footnote-back">↩︎</a></p></li>
<li id="fn15"><p>You can read the history to this picture when you are done with a section and really bored: <a href="http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/" class="uri">http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/</a><a href="coding-style.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p>I call it an exercise, because I am not sure if it is well explained and therefore the ‘exercise’ is to understand what I intend to show you here :)<a href="coding-style.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>Multiple functions within each other get evaluated from the inside to the outside.<a href="coding-style.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>please no spaces<a href="coding-style.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>not the blue arrow, but try this out as well<a href="coding-style.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p>If it does not help once, do this <a href="https://stackoverflow.com/a/1467334" class="uri">https://stackoverflow.com/a/1467334</a><a href="coding-style.html#fnref20" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Analysis in R</strong>" was written by Nico Hüttmann. It was last built on 2025-02-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
